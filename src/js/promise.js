// var promise=new Promise(function(resolve,reject){
//       if(true){
//           resolve(value);
//       } else{
//           reject(error);
//       } 
// });
const path=require('path');

var fs=require('fs');
function readFile_promise(path){
  return new Promise(function(resolve,reject){
        fs.readFile(path,'utf8',function(err,data){
            if(data){
                resolve(data);
            }else{
                reject(err);
            }
        });
  });
}


// var promise= readFile_promise(path.join(__dirname,'foo.txt'));
// promise
// .then(function(value){
//   console.log(value);
// })
// .catch(function(err){
//     throw new Error(err);
// })

// console.log();

//Promise.resolve 转化为promise对象
// var obj={
//     then:function(){
//         console.log("method");
//     }
// };
// console.log(Promise.resolve(obj));
//Generator 
//  function* generator(){
//      try{
//          yield console.log("hello");

//      } catch(e){
//          console.log(e)
//      }
//      yield console.log('node');
//      return 'end';
//  }
//  var gen = generator();
//  gen.next();
//  gen.throw("throw err");
// console.log( gen.next());
// 捕获异常
// function* generator(){
//     try{
//         yield console.log("hello");

//     } catch(e){
//         console.log(e)
//     }
//     console.log("test");
//     yield console.log('from lear');
//     return 'end';
// }
// var gen=generator();
// gen.next();
// gen.throw('throw err');


//Generator 组织异步方法
function* gen(){
    var result =yield readFile_promise(path.join(__dirname,'foo.txt'));
    console.log(result,"<-result");
    var result2=yield readFile_promise(path.join(__dirname,'baz.txt'));
    console.log(result2,"<-result2");
    // return result2;
}

var g=gen();
// var result=g.next();
// result.value.then(function(data){
//     // console.log(data);
//     // console.log(g.next(data));

//     g.next(data).value.then(function(data){
//         g.next(data);
//     })
// })

// function* gen1(){
//     var y =yield 10;
//     console.log("111",y);
//     return y;
// }
// var genq=gen1();
// console.log(genq.next());
// console.log(genq.next(5));


// function auto_exec(gen){
//     function next(data){
//         var result = gen.next(data);
//         if(result.done) return result.value;
//         result.value.then(function(data){
//             next(data);
//         });
//     }
//     next();
// }
// auto_exec(g);



//回调终点 async/await

var asyncReadFile= async function(){
    var result1=await readFile_promise(path.join(__dirname,'foo.txt'));
    var result2=await readFile_promise(path.join(__dirname,'bar.txt'));
    console.log(result1);
    console.log(result2);

    return result2;
     
}

// asyncReadFile().then(function(data){
//     console.log(data);
// });

// async function readFile(){
//    const [result1,result2]=await Promise.all([readFile_promise(path.join(__dirname,'foo.txt')),
//    readFile_promise(path.join(__dirname,'bar.txt'))]);
//    console.log(result1,result2);
// }
// readFile();/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// function readFile(){
//     return Promise.all([readFile_promise(path.join(__dirname,'foo.txt')),
//        readFile_promise(path.join(__dirname,'bar.txt'))]).then(function(data){
//            console.log(data);
//        });
// }

// console.log(readFile());


